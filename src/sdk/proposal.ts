/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { proposalCancelProposal } from "../funcs/proposalCancelProposal.js";
import { proposalCreateProposal } from "../funcs/proposalCreateProposal.js";
import { proposalGetProposal } from "../funcs/proposalGetProposal.js";
import { proposalInitializeProposal } from "../funcs/proposalInitializeProposal.js";
import { proposalListProposals } from "../funcs/proposalListProposals.js";
import { proposalListProposalStakes } from "../funcs/proposalListProposalStakes.js";
import { proposalListProposalTrades } from "../funcs/proposalListProposalTrades.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import { ProposalRequest } from "../models/components/proposalrequest.js";
import { CancelProposalResponse } from "../models/operations/cancelproposal.js";
import { CreateProposalResponse } from "../models/operations/createproposal.js";
import {
  GetProposalResponse,
  GetProposalSecurity,
} from "../models/operations/getproposal.js";
import { InitializeProposalResponse } from "../models/operations/initializeproposal.js";
import {
  ListProposalsRequest,
  ListProposalsResponseBody,
  ListProposalsSecurity,
} from "../models/operations/listproposals.js";
import { ListProposalStakesResponse } from "../models/operations/listproposalstakes.js";
import {
  ListProposalTradesResponse,
  Side,
} from "../models/operations/listproposaltrades.js";
import { unwrapAsync } from "../types/fp.js";

export class Proposal extends ClientSDK {
  /**
   * List proposals
   *
   * @remarks
   * Returns proposals with visibility rules. Unauthenticated users see public proposals (staking, active, resolved, executed). Authenticated users also see their own drafts. Admins see all.
   *
   * **Searchable fields:** `title`
   *
   * **Default search field:** `title`
   */
  async listProposals(
    request: ListProposalsRequest,
    security?: ListProposalsSecurity | undefined,
    options?: RequestOptions,
  ): Promise<ListProposalsResponseBody> {
    return unwrapAsync(proposalListProposals(
      this,
      request,
      security,
      options,
    ));
  }

  /**
   * Create proposal
   *
   * @remarks
   * Creates a new proposal in draft status.
   *
   * **Error Codes:** `VALIDATION_ERROR`, `INVALID_ACTION_DATA`, `EMPTY_ACTIONS`, `ORGANIZATION_NOT_FOUND`, `INSUFFICIENT_TOKEN_BALANCE`, `INVALID_TOKEN`
   */
  async createProposal(
    request: ProposalRequest,
    options?: RequestOptions,
  ): Promise<CreateProposalResponse> {
    return unwrapAsync(proposalCreateProposal(
      this,
      request,
      options,
    ));
  }

  /**
   * Get proposal details
   *
   * @remarks
   * Returns full proposal details. Draft proposals are only visible to authorized users.
   *
   * **Error Codes:** `PROPOSAL_NOT_FOUND`, `NOT_AUTHORIZED`
   */
  async getProposal(
    id: number,
    security?: GetProposalSecurity | undefined,
    options?: RequestOptions,
  ): Promise<GetProposalResponse> {
    return unwrapAsync(proposalGetProposal(
      this,
      id,
      security,
      options,
    ));
  }

  /**
   * Cancel proposal
   *
   * @remarks
   * Cancels a proposal. Only allowed before trading begins (draft or staking status).
   *
   * **Error Codes:** `PROPOSAL_NOT_FOUND`, `INVALID_STATUS_TRANSITION`, `NOT_AUTHORIZED`, `INVALID_TOKEN`
   */
  async cancelProposal(
    id: number,
    options?: RequestOptions,
  ): Promise<CancelProposalResponse> {
    return unwrapAsync(proposalCancelProposal(
      this,
      id,
      options,
    ));
  }

  /**
   * Initialize proposal
   *
   * @remarks
   * Submits a draft proposal to the staking phase.
   *
   * **Error Codes:** `PROPOSAL_NOT_FOUND`, `INVALID_STATUS_TRANSITION`, `PROPOSAL_ALREADY_ACTIVE`, `NOT_AUTHORIZED`, `INVALID_TOKEN`
   */
  async initializeProposal(
    id: number,
    options?: RequestOptions,
  ): Promise<InitializeProposalResponse> {
    return unwrapAsync(proposalInitializeProposal(
      this,
      id,
      options,
    ));
  }

  /**
   * List proposal stakes
   *
   * @remarks
   * Returns a paginated list of stakes for a proposal.
   */
  async listProposalStakes(
    id: number,
    page?: number | undefined,
    limit?: number | undefined,
    options?: RequestOptions,
  ): Promise<ListProposalStakesResponse> {
    return unwrapAsync(proposalListProposalStakes(
      this,
      id,
      page,
      limit,
      options,
    ));
  }

  /**
   * List proposal trades
   *
   * @remarks
   * Returns a paginated list of trades for a proposal's decision markets.
   */
  async listProposalTrades(
    id: number,
    page?: number | undefined,
    limit?: number | undefined,
    side?: Side | undefined,
    options?: RequestOptions,
  ): Promise<ListProposalTradesResponse> {
    return unwrapAsync(proposalListProposalTrades(
      this,
      id,
      page,
      limit,
      side,
      options,
    ));
  }
}
